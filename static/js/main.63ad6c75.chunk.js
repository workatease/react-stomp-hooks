(this["webpackJsonpreact-stomp-hooks-example"]=this["webpackJsonpreact-stomp-hooks-example"]||[]).push([[0],{105:function(e,t,n){},148:function(e,t,n){"use strict";n.r(t);n(105);var r=n(0),s=n.n(r),c=n(11),a=n.n(c),i=n(18),o=n(19),u=n(42),b=n(97),l=n(96),d=n(29),j=n(179),h=n(93),O=n.n(h),p=n(192);var v=Object(r.createContext)(void 0),f=["url","children","stompClientOptions"];function x(e){var t=e.url,n=e.children,c=e.stompClientOptions,a=function(e,t){if(null==e)return{};var n,r,s={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,f);c&&(a=c);var i=Object(r.useState)(void 0),o=i[0],u=i[1],b=Object(r.useRef)(new Map);Object(r.useEffect)((function(){var e=new p.a(a);return a.brokerURL||a.webSocketFactory||(e.webSocketFactory=function(){var e,n,r=new URL(t,null===(e=window)||void 0===e||null===(n=e.location)||void 0===n?void 0:n.href);if("http:"===r.protocol||"https:"===r.protocol)return new O.a(t);if("ws:"===r.protocol||"wss:"===r.protocol)return new WebSocket(t);throw new Error("Protocol not supported")}),e.onConnect=function(t){a.onConnect&&a.onConnect(t),b.current.forEach((function(t){t.subscription=e.subscribe(t.destination,t.callback,t.headers)}))},a.onStompError||(e.onStompError=function(e){throw e}),e.activate(),u(e),function(){e.deactivate()}}),[t].concat(Object.values(a)));return s.a.createElement(v.Provider,{value:{client:o,subscribe:function(e,t,n){void 0===n&&(n={});var r=Math.random().toString(36).substr(2,9),s={destination:e,callback:t,headers:n};return b.current.set(r,s),o&&o.connected&&(s.subscription=o.subscribe(e,t,n)),function(){var e=b.current.get(r);e.subscription&&e.subscription.unsubscribe(),b.current.delete(r)}}}},n)}function g(e,t,n){void 0===n&&(n={});var s=Object(r.useContext)(v);if(void 0===s)throw new Error("There must be a StompSessionProvider as Ancestor of all Stomp Hooks and HOCs");var c=Object(r.useRef)(t),a=Array.isArray(e)?e:[e];c.current=t,Object(r.useEffect)((function(){var e=[];return a.forEach((function(t){return e.push(s.subscribe(t,(function(e){c.current(e)}),n))})),function(){e.forEach((function(e){e()}))}}),[Object.values(a).toString(),Object.values(n).toString()])}function m(){var e=Object(r.useContext)(v);if(void 0===e)throw new Error("There must be a StompSessionProvider as Ancestor of all Stomp Hooks and HOCs");return e.client}var y=n(182),S=n(183),w=n(184),C=n(185),M=n(191),k=n(186),E=n(187),L=n(189),P=n(193),H=n(194),N=n(188),R=n(95),A=n.n(R),T=n(6);function U(){var e=Object(r.useState)("No message received yet"),t=Object(d.a)(e,2),n=t[0],s=t[1];return g("/topic/test",(function(e){return s(e.body)})),Object(T.jsxs)(M.a,{children:["Last Message: ",n]})}function q(){var e=Object(r.useState)(""),t=Object(d.a)(e,2),n=t[0],s=t[1],c=Object(r.useState)("No message received yet"),a=Object(d.a)(c,2),i=a[0],o=a[1],u=m();g("/user/queue/echoreply",(function(e){return o(e.body)}));return Object(T.jsxs)(k.a,{container:!0,direction:"row",spacing:3,children:[Object(T.jsx)(k.a,{item:!0,children:Object(T.jsx)(E.a,{variant:"contained",onClick:function(){u.publish({destination:"/app/echo",body:"Echo "+n})},children:"Send Message"})}),Object(T.jsx)(k.a,{item:!0,children:Object(T.jsx)(L.a,{variant:"standard",value:n,onChange:function(e){return s(e.target.value)}})}),Object(T.jsx)(k.a,{item:!0,children:Object(T.jsxs)(C.a,{variant:"body1",children:["Last Message received: ",i]})})]})}var F,I,J,B=function(e){return function(t){var n=m();return s.a.createElement(e,Object.assign({stompClient:n},t))}}((F=function(e){Object(b.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).stompClient=e.stompClient,r.state={input:"",lastMessage:"No message received yet"},r.handleChange=r.handleChange.bind(Object(u.a)(r)),r.sendMessage=r.sendMessage.bind(Object(u.a)(r)),r.onMessage=r.onMessage.bind(Object(u.a)(r)),r}return Object(o.a)(n,[{key:"onMessage",value:function(e){this.setState({lastMessage:e.body})}},{key:"sendMessage",value:function(){this.stompClient.publish({destination:"/app/echo",body:"Echo "+this.state.input})}},{key:"handleChange",value:function(e){this.setState({input:e.target.value})}},{key:"render",value:function(){return Object(T.jsxs)(k.a,{container:!0,direction:"row",spacing:3,children:[Object(T.jsx)(k.a,{item:!0,children:Object(T.jsx)(E.a,{variant:"contained",onClick:this.sendMessage,children:"Send Message"})}),Object(T.jsx)(k.a,{item:!0,children:Object(T.jsx)(L.a,{variant:"standard",value:this.state.input,onChange:this.handleChange})}),Object(T.jsx)(k.a,{item:!0,children:Object(T.jsxs)(C.a,{variant:"body1",children:["Last Message received: ",this.state.lastMessage]})})]})}}]),n}(s.a.Component),I="/user/queue/echoreply",void 0===J&&(J={}),function(e){var t=Object(r.useRef)();return g(I,(function(e){t.current&&t.current.onMessage(e)}),J),s.a.createElement(F,Object.assign({ref:t},e))}));function D(){var e=Object(r.useState)("No message received yet"),t=Object(d.a)(e,2),n=t[0],s=t[1],c=Object(r.useState)(!1),a=Object(d.a)(c,2),i=a[0],o=a[1];return g(i?["/topic/test"]:[],(function(e){return s(e.body)})),Object(T.jsxs)(M.a,{sx:{width:"100%",display:"flex",justifyContent:"space-between"},children:[Object(T.jsxs)(M.a,{children:["Last Message: ",n]}),Object(T.jsx)(M.a,{children:Object(T.jsx)(E.a,{onClick:function(){return o(!i)},children:i?"Unsubscribe":"Subscribe"})})]})}function W(e){return Object(T.jsxs)(P.a,{style:{margin:"3em"},TransitionProps:{unmountOnExit:!0},children:[Object(T.jsx)(H.a,{expandIcon:Object(T.jsx)(A.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:Object(T.jsx)(C.a,{children:e.title})}),Object(T.jsx)(N.a,{children:e.children})]})}var Y=function(){return Object(T.jsxs)(x,{url:"https://stream.elite12.de/api/sock",debug:function(e){console.log(e)},children:[Object(T.jsx)(j.a,{}),Object(T.jsxs)(y.a,{children:[Object(T.jsx)(S.a,{style:{margin:"3em"},variant:"outlined",children:Object(T.jsxs)(w.a,{children:[Object(T.jsx)(C.a,{children:"You can see the STOMP Messages send and received in the browser console"}),Object(T.jsx)(C.a,{children:"Note that, because the components are unmounted when the accordion is unexpanded, all subscriptions are removed when you close the accordion."})]})}),Object(T.jsx)(W,{title:"Subscribing",children:Object(T.jsx)(U,{})}),Object(T.jsx)(W,{title:"Sending Messages",children:Object(T.jsx)(q,{})}),Object(T.jsx)(W,{title:"Higher Order Components",children:Object(T.jsx)(B,{})}),Object(T.jsx)(W,{title:"Dynamic subscribing/unsubscribing",children:Object(T.jsx)(D,{})})]})]})};a.a.render(Object(T.jsx)(Y,{}),document.getElementById("root"))}},[[148,1,2]]]);
//# sourceMappingURL=main.63ad6c75.chunk.js.map