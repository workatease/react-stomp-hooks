(this["webpackJsonpreact-stomp-hooks-example"]=this["webpackJsonpreact-stomp-hooks-example"]||[]).push([[0],{107:function(e,t,n){},150:function(e,t,n){"use strict";n.r(t);n(107);var c=n(0),s=n.n(c),r=n(11),a=n.n(r),o=n(18),i=n(19),u=n(43),b=n(99),l=n(97),d=n(25),j=n(181),h=n(98),O=n(94),p=n.n(O),f=n(194);var v=Object(c.createContext)(void 0),g=["url","children","stompClientOptions"];function x(e){var t=e.url,n=e.children,r=e.stompClientOptions,a=function(e,t){if(null==e)return{};var n,c,s={},r=Object.keys(e);for(c=0;c<r.length;c++)n=r[c],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,g);r&&(a=r);var o=Object(c.useState)(void 0),i=Object(d.a)(o,2),u=i[0],b=i[1],l=Object(c.useRef)(new Map);Object(c.useEffect)((function(){var e=new f.a(a);return a.brokerURL||a.webSocketFactory||(e.webSocketFactory=function(){var e,n,c=new URL(t,null==(e=window)||null==(n=e.location)?void 0:n.href);if("http:"===c.protocol||"https:"===c.protocol)return new p.a(t);if("ws:"===c.protocol||"wss:"===c.protocol)return new WebSocket(t);throw new Error("Protocol not supported")}),e.onConnect=function(t){a.onConnect&&a.onConnect(t),l.current.forEach((function(t){t.subscription=e.subscribe(t.destination,t.callback,t.headers)})),b(e)},e.onWebSocketClose=function(e){a.onWebSocketClose&&a.onWebSocketClose(e),b(void 0)},a.onStompError||(e.onStompError=function(e){throw e}),e.activate(),function(){e.deactivate()}}),[t].concat(Object(h.a)(Object.values(a))));return s.a.createElement(v.Provider,{value:{client:u,subscribe:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=Math.random().toString(36).substr(2,9),s={destination:e,callback:t,headers:n};return l.current.set(c,s),u&&u.connected&&(s.subscription=u.subscribe(e,t,n)),function(){var e=l.current.get(c);e.subscription&&e.subscription.unsubscribe(),l.current.delete(c)}}}},n)}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=Object(c.useContext)(v);if(void 0===s)throw new Error("There must be a StompSessionProvider as Ancestor of all Stomp Hooks and HOCs");var r=Object(c.useRef)(t),a=Array.isArray(e)?e:[e];r.current=t,Object(c.useEffect)((function(){var e=[];return a.forEach((function(t){return e.push(s.subscribe(t,(function(e){r.current(e)}),n))})),function(){e.forEach((function(e){e()}))}}),[Object.values(a).toString(),Object.values(n).toString()])}function S(){var e=Object(c.useContext)(v);if(void 0===e)throw new Error("There must be a StompSessionProvider as Ancestor of all Stomp Hooks and HOCs");return e.client}new Map;new Map;var y=n(184),w=n(185),C=n(186),k=n(187),M=n(193),E=n(188),L=n(189),P=n(191),H=n(195),N=n(196),R=n(190),A=n(96),T=n.n(A),W=n(6);function U(){return Object(W.jsxs)(x,{url:"https://stream.elite12.de/api/sock",debug:function(e){console.log(e)},children:[Object(W.jsx)(j.a,{}),Object(W.jsxs)(y.a,{children:[Object(W.jsx)(w.a,{style:{margin:"3em"},variant:"outlined",children:Object(W.jsxs)(C.a,{children:[Object(W.jsx)(k.a,{children:"You can see the STOMP Messages send and received in the browser console"}),Object(W.jsx)(k.a,{children:"Note that, because the components are unmounted when the accordion is unexpanded, all subscriptions are removed when you close the accordion."})]})}),Object(W.jsx)(D,{title:"Subscribing",children:Object(W.jsx)(q,{})}),Object(W.jsx)(D,{title:"Sending Messages",children:Object(W.jsx)(F,{})}),Object(W.jsx)(D,{title:"Higher Order Components",children:Object(W.jsx)(J,{})}),Object(W.jsx)(D,{title:"Dynamic subscribing/unsubscribing",children:Object(W.jsx)(B,{})})]})]})}function q(){var e=Object(c.useState)("No message received yet"),t=Object(d.a)(e,2),n=t[0],s=t[1];return m("/topic/test",(function(e){return s(e.body)})),Object(W.jsxs)(M.a,{children:["Last Message: ",n]})}function F(){var e=Object(c.useState)(""),t=Object(d.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)("No message received yet"),a=Object(d.a)(r,2),o=a[0],i=a[1],u=S();m("/user/queue/echoreply",(function(e){return i(e.body)}));return Object(W.jsxs)(E.a,{container:!0,direction:"row",spacing:3,children:[Object(W.jsx)(E.a,{item:!0,children:Object(W.jsx)(L.a,{variant:"contained",onClick:function(){u&&u.publish({destination:"/app/echo",body:"Echo "+n})},children:"Send Message"})}),Object(W.jsx)(E.a,{item:!0,children:Object(W.jsx)(P.a,{variant:"standard",value:n,onChange:function(e){return s(e.target.value)}})}),Object(W.jsx)(E.a,{item:!0,children:Object(W.jsxs)(k.a,{variant:"body1",children:["Last Message received: ",o]})})]})}var I,J=(I=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){var a=Object(c.useRef)();return m(t,(function(e){a.current&&a.current.onMessage(e)}),n),s.a.createElement(e,Object.assign({ref:a},r))}}(function(e){Object(b.a)(n,e);var t=Object(l.a)(n);function n(e){var c;return Object(o.a)(this,n),(c=t.call(this,e)).stompClient=e.stompClient,c.state={input:"",lastMessage:"No message received yet"},c.handleChange=c.handleChange.bind(Object(u.a)(c)),c.sendMessage=c.sendMessage.bind(Object(u.a)(c)),c.onMessage=c.onMessage.bind(Object(u.a)(c)),c}return Object(i.a)(n,[{key:"onMessage",value:function(e){this.setState({lastMessage:e.body})}},{key:"sendMessage",value:function(){this.stompClient.publish({destination:"/app/echo",body:"Echo "+this.state.input})}},{key:"handleChange",value:function(e){this.setState({input:e.target.value})}},{key:"render",value:function(){return Object(W.jsxs)(E.a,{container:!0,direction:"row",spacing:3,children:[Object(W.jsx)(E.a,{item:!0,children:Object(W.jsx)(L.a,{variant:"contained",onClick:this.sendMessage,children:"Send Message"})}),Object(W.jsx)(E.a,{item:!0,children:Object(W.jsx)(P.a,{variant:"standard",value:this.state.input,onChange:this.handleChange})}),Object(W.jsx)(E.a,{item:!0,children:Object(W.jsxs)(k.a,{variant:"body1",children:["Last Message received: ",this.state.lastMessage]})})]})}}]),n}(s.a.Component),"/user/queue/echoreply"),function(e){var t=S();return s.a.createElement(I,Object.assign({stompClient:t},e))});function B(){var e=Object(c.useState)("No message received yet"),t=Object(d.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(!1),a=Object(d.a)(r,2),o=a[0],i=a[1];return m(o?["/topic/test"]:[],(function(e){return s(e.body)})),Object(W.jsxs)(M.a,{sx:{width:"100%",display:"flex",justifyContent:"space-between"},children:[Object(W.jsxs)(M.a,{children:["Last Message: ",n]}),Object(W.jsx)(M.a,{children:Object(W.jsx)(L.a,{onClick:function(){return i(!o)},children:o?"Unsubscribe":"Subscribe"})})]})}function D(e){return Object(W.jsxs)(H.a,{style:{margin:"3em"},TransitionProps:{unmountOnExit:!0},children:[Object(W.jsx)(N.a,{expandIcon:Object(W.jsx)(T.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:Object(W.jsx)(k.a,{children:e.title})}),Object(W.jsx)(R.a,{children:e.children})]})}a.a.render(Object(W.jsx)(U,{}),document.getElementById("root"))}},[[150,1,2]]]);
//# sourceMappingURL=main.da956d8e.chunk.js.map