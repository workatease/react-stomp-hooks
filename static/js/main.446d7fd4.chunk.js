(this["webpackJsonpreact-stomp-hooks-example"]=this["webpackJsonpreact-stomp-hooks-example"]||[]).push([[0],{107:function(e,t,n){},150:function(e,t,n){"use strict";n.r(t);n(107);var c=n(0),r=n.n(c),s=n(11),a=n.n(s),i=n(18),o=n(19),u=n(43),b=n(99),l=n(97),d=n(25),j=n(181),h=n(98),O=n(94),p=n.n(O),f=n(194);var v=Object(c.createContext)(void 0),g=["url","children","stompClientOptions"];function x(e){var t=e.url,n=e.children,s=e.stompClientOptions,a=function(e,t){if(null==e)return{};var n,c,r={},s=Object.keys(e);for(c=0;c<s.length;c++)n=s[c],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,g);s&&(a=s);var i=Object(c.useState)(void 0),o=Object(d.a)(i,2),u=o[0],b=o[1],l=Object(c.useRef)(new Map);Object(c.useEffect)((function(){var e=new f.a(a);return a.brokerURL||a.webSocketFactory||(e.webSocketFactory=function(){var e,n,c=new URL(t,null==(e=window)||null==(n=e.location)?void 0:n.href);if("http:"===c.protocol||"https:"===c.protocol)return new p.a(t);if("ws:"===c.protocol||"wss:"===c.protocol)return new WebSocket(t);throw new Error("Protocol not supported")}),e.onConnect=function(t){a.onConnect&&a.onConnect(t),l.current.forEach((function(t){t.subscription=e.subscribe(t.destination,t.callback,t.headers)}))},a.onStompError||(e.onStompError=function(e){throw e}),e.activate(),b(e),function(){e.deactivate()}}),[t].concat(Object(h.a)(Object.values(a))));return r.a.createElement(v.Provider,{value:{client:u,subscribe:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=Math.random().toString(36).substr(2,9),r={destination:e,callback:t,headers:n};return l.current.set(c,r),u&&u.connected&&(r.subscription=u.subscribe(e,t,n)),function(){var e=l.current.get(c);e.subscription&&e.subscription.unsubscribe(),l.current.delete(c)}}}},n)}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object(c.useContext)(v);if(void 0===r)throw new Error("There must be a StompSessionProvider as Ancestor of all Stomp Hooks and HOCs");var s=Object(c.useRef)(t),a=Array.isArray(e)?e:[e];s.current=t,Object(c.useEffect)((function(){var e=[];return a.forEach((function(t){return e.push(r.subscribe(t,(function(e){s.current(e)}),n))})),function(){e.forEach((function(e){e()}))}}),[Object.values(a).toString(),Object.values(n).toString()])}function y(){var e=Object(c.useContext)(v);if(void 0===e)throw new Error("There must be a StompSessionProvider as Ancestor of all Stomp Hooks and HOCs");return e.client}new Map;new Map;var w=n(184),S=n(185),C=n(186),M=n(187),k=n(193),E=n(188),L=n(189),P=n(191),H=n(195),N=n(196),R=n(190),A=n(96),T=n.n(A),U=n(6);function q(){return Object(U.jsxs)(x,{url:"https://stream.elite12.de/api/sock",debug:function(e){console.log(e)},children:[Object(U.jsx)(j.a,{}),Object(U.jsxs)(w.a,{children:[Object(U.jsx)(S.a,{style:{margin:"3em"},variant:"outlined",children:Object(U.jsxs)(C.a,{children:[Object(U.jsx)(M.a,{children:"You can see the STOMP Messages send and received in the browser console"}),Object(U.jsx)(M.a,{children:"Note that, because the components are unmounted when the accordion is unexpanded, all subscriptions are removed when you close the accordion."})]})}),Object(U.jsx)(W,{title:"Subscribing",children:Object(U.jsx)(F,{})}),Object(U.jsx)(W,{title:"Sending Messages",children:Object(U.jsx)(I,{})}),Object(U.jsx)(W,{title:"Higher Order Components",children:Object(U.jsx)(B,{})}),Object(U.jsx)(W,{title:"Dynamic subscribing/unsubscribing",children:Object(U.jsx)(D,{})})]})]})}function F(){var e=Object(c.useState)("No message received yet"),t=Object(d.a)(e,2),n=t[0],r=t[1];return m("/topic/test",(function(e){return r(e.body)})),Object(U.jsxs)(k.a,{children:["Last Message: ",n]})}function I(){var e=Object(c.useState)(""),t=Object(d.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)("No message received yet"),a=Object(d.a)(s,2),i=a[0],o=a[1],u=y();m("/user/queue/echoreply",(function(e){return o(e.body)}));return Object(U.jsxs)(E.a,{container:!0,direction:"row",spacing:3,children:[Object(U.jsx)(E.a,{item:!0,children:Object(U.jsx)(L.a,{variant:"contained",onClick:function(){u.publish({destination:"/app/echo",body:"Echo "+n})},children:"Send Message"})}),Object(U.jsx)(E.a,{item:!0,children:Object(U.jsx)(P.a,{variant:"standard",value:n,onChange:function(e){return r(e.target.value)}})}),Object(U.jsx)(E.a,{item:!0,children:Object(U.jsxs)(M.a,{variant:"body1",children:["Last Message received: ",i]})})]})}var J,B=(J=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(s){var a=Object(c.useRef)();return m(t,(function(e){a.current&&a.current.onMessage(e)}),n),r.a.createElement(e,Object.assign({ref:a},s))}}(function(e){Object(b.a)(n,e);var t=Object(l.a)(n);function n(e){var c;return Object(i.a)(this,n),(c=t.call(this,e)).stompClient=e.stompClient,c.state={input:"",lastMessage:"No message received yet"},c.handleChange=c.handleChange.bind(Object(u.a)(c)),c.sendMessage=c.sendMessage.bind(Object(u.a)(c)),c.onMessage=c.onMessage.bind(Object(u.a)(c)),c}return Object(o.a)(n,[{key:"onMessage",value:function(e){this.setState({lastMessage:e.body})}},{key:"sendMessage",value:function(){this.stompClient.publish({destination:"/app/echo",body:"Echo "+this.state.input})}},{key:"handleChange",value:function(e){this.setState({input:e.target.value})}},{key:"render",value:function(){return Object(U.jsxs)(E.a,{container:!0,direction:"row",spacing:3,children:[Object(U.jsx)(E.a,{item:!0,children:Object(U.jsx)(L.a,{variant:"contained",onClick:this.sendMessage,children:"Send Message"})}),Object(U.jsx)(E.a,{item:!0,children:Object(U.jsx)(P.a,{variant:"standard",value:this.state.input,onChange:this.handleChange})}),Object(U.jsx)(E.a,{item:!0,children:Object(U.jsxs)(M.a,{variant:"body1",children:["Last Message received: ",this.state.lastMessage]})})]})}}]),n}(r.a.Component),"/user/queue/echoreply"),function(e){var t=y();return r.a.createElement(J,Object.assign({stompClient:t},e))});function D(){var e=Object(c.useState)("No message received yet"),t=Object(d.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(!1),a=Object(d.a)(s,2),i=a[0],o=a[1];return m(i?["/topic/test"]:[],(function(e){return r(e.body)})),Object(U.jsxs)(k.a,{sx:{width:"100%",display:"flex",justifyContent:"space-between"},children:[Object(U.jsxs)(k.a,{children:["Last Message: ",n]}),Object(U.jsx)(k.a,{children:Object(U.jsx)(L.a,{onClick:function(){return o(!i)},children:i?"Unsubscribe":"Subscribe"})})]})}function W(e){return Object(U.jsxs)(H.a,{style:{margin:"3em"},TransitionProps:{unmountOnExit:!0},children:[Object(U.jsx)(N.a,{expandIcon:Object(U.jsx)(T.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:Object(U.jsx)(M.a,{children:e.title})}),Object(U.jsx)(R.a,{children:e.children})]})}a.a.render(Object(U.jsx)(q,{}),document.getElementById("root"))}},[[150,1,2]]]);
//# sourceMappingURL=main.446d7fd4.chunk.js.map